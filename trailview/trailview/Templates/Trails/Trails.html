{% extends 'Layout.html' %}

{% block title %}Trails{% endblock %}

{% block content %}

@Scripts.Render("~/Scripts/trailview_site_point_selection_map.js")

<br />
<div style="border-bottom: 2px solid #485a28">
    <span class="Title">List of Trails</span><br />
    <span class="SubTitle">Click on a link to be taken to the trail.</span><br />
</div>

{% for t in trails %}
    <div class="trailList">
        {% with link = "/Map/Trail/"|add:t.id, click = "requestPointInformation('"|add:t.id|add:"')" %}
        <p class="Link"><a href="{{ link }}">{{ t.Name }}</a>
            <span class="close_trail_points_list" id="" onclick="{{ click }}" title="Click to show points on the map.">&rarr;</span>
        </p>
        {% endwith %}
    </div>
{% endblock %}

<div id="mapSelection">
    <label for="cbPointsFilter">Filter by:</label>
    <select id="cbPointsFilter" name="cbPointsFilter">
        {% for opt in filter_options %}
            <option value="{{ opt.value }}">{{ opt.Text }}</option>
        {% endfor %}
    </select>
    <div id="mapPointSelectionCanvas"></div>
</div>

<script type="text/javascript">
    var GetPossibleEntryPoints = "@Url.Action("GetPossibleEntryPoints", "Trail")"
    var MapView = "@Url.Action("MapView", "Map")"
    $(".close_trail_points_list").tooltip({
        show: { delay: 500 }
    });
    $("#cbPointsFilter").change(function () { handleDropDownValueChange(); });
    $(document).ready(initializeSelectionMap);
</script>

{% endblock %}
